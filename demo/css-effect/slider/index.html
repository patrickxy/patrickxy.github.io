<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>slider</title>
    <style>
        *{
            margin:0;padding: 0;
            box-sizing: border-box;
        }
        ul li{
            list-style-type: none;
        }
        body{
            width: 1200px;
            margin:0 auto;
            padding: 40px 0;
        }
        #slider-wrap{
            position: relative;
            width: 960px;
            height: 540px;
            overflow: hidden;
        }
        #slider{
            position: absolute;
            left: 0;
            top:0;
            width: 4800px;
            height: 540px;
            font-size: 0;
        }
        #slider li{
            float: left;
            width: 960px;
            height: 100%;
        }
        #slider li img{
            width: 100%;
            height: 540px;
        }
        #curIndexArr .circle{}
    </style>
</head>
<body>
    <h3>图片轮播</h3>
    <h3 id="curIndex">0</h3>
    <div id="curIndexArr">
        <span class="circle cur"></span>
        <span class="circle"></span>
        <span class="circle"></span>
        <span class="circle"></span>
        <span class="circle"></span>
    </div>
    <p id="prev">上一张</p>
    <p id="next">下一张</p>
    <div id="slider-wrap">
        <ul id="slider">
            <li class="slider-item"><img src="../../images/girls/girl1_1920_1080.jpg"></li>
            <li class="slider-item"><img src="../../images/girls/girl2_1920_1080.jpg"></li>
            <li class="slider-item">
                <img src="../../images/girls/girl3_1920_1080.jpg">
            </li>
            <li class="slider-item">
                <img src="../../images/girls/girl4_1920_1080.jpg">
            </li>
            <li class="slider-item">
                <img src="../../images/girls/girl5_1920_1080.jpg">
            </li>
        </ul>
    </div>
    <script src="../../common/js/jquery1.11.3.js"></script>
    <script>
        $(function () {
//  todo：点击某个circle 滑动  思路先复制一个滑动后显示的 li 放在当前li 前面或者后面 滑动后 删除复制的元素 ？？
//            如果不滑动 而是 fade效果 可用 css3 动画 js只控制显示哪一个即可
            let sliderLength = $('#slider .slider-item').length;
            let sliderInterval = '';
            let curIndex = 0;
            let slide = {
                init: function () {
                    sliderInterval = setInterval(goNext,2000);
                    this.bindEvent();
                },
                pause: function () {
                    clearInterval(sliderInterval);
                },
                continue1: function () {
                    sliderInterval = setInterval(goNext,2000);
                },
                triggerNext: function () {
                    if($('#slider').is(':animated')){
                        return;
                    }
                    let that = this;
                    that.pause();
                    $('#slider').animate({'left':-960+'px'},1000, function () {
                        var firstSlideCopy =  $('#slider .slider-item').first().clone();
                        $('#slider .slider-item').first().remove();
                        $('#slider').append(firstSlideCopy).css('left',0);
                        curIndex = curIndex == sliderLength-1 ?  0 :curIndex+1;
                        that.renderCurIndex(curIndex);
                        that.continue1();
                    });
                },
                triggerPrev: function () {
                    if($('#slider').is(':animated')){
                        return;
                    }
                    let that = this;
                    that.pause();
                    var lastSlideCopy =  $('#slider .slider-item').last().clone();
                    $('#slider .slider-item').last().remove();
                    $('#slider').prepend(lastSlideCopy).css('left',-960+'px');
                    $('#slider').animate({'left':0+'px'},1000, function () {
                        curIndex = curIndex == 0 ? sliderLength-1 : curIndex-1 ;
                        that.renderCurIndex(curIndex);
                        that.continue1();
                    });
                },
                bindEvent: function () {
                    let that = this;
                    $('#slider').hover(function () {
                        that.pause();
                    }, function () {
                        that.continue1();
                    });
                    $('#curIndexArr span').on('click', function () {
                        let triggerIndex = $(this).index();
                        that.slideToN(triggerIndex)
                    });
                    $('#next').click(function(){
                        that.triggerNext();
                    });
                    $('#prev').click(function(){
                        that.triggerPrev();
                    })
                },
                renderCurIndex: function (index) {
                    $('#curIndex').html(index);
                },
                slideToN: function (n) {
                    if(n > curIndex){
//                        next(n);
                    }else if(n < curIndex){
//                        prev(n)
                    }
                }
            };
            function goNext(){
                $('#slider').animate({'left':-960+'px'},1000, function () {
                    var firstSlideCopy =  $('#slider .slider-item').first().clone();
                    $('#slider .slider-item').first().remove();
                    $('#slider').append(firstSlideCopy).css('left',0);
                    curIndex = curIndex == sliderLength-1 ?  0 :curIndex+1;
                    slide.renderCurIndex(curIndex);
                });
            }
            function goPrev(){
                var lastSlideCopy =  $('#slider .slider-item').last().clone();
                $('#slider .slider-item').last().remove();
                $('#slider').prepend(lastSlideCopy).css('left',-960+'px');
                $('#slider').animate({'left':0+'px'},1000, function () {
                    curIndex = curIndex == 0 ? sliderLength-1 : curIndex-1 ;
                    slide.renderCurIndex(curIndex);
                });
            }

        slide.init();


        });
    </script>
</body>
</html>